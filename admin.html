<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shamma Salon - Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .admin-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .admin-header p {
            color: #bdc3c7;
            font-size: 1.1rem;
        }
        
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 30px;
            background: #f8f9fa;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            text-align: center;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .stat-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .stat-card p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .booking-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .booking-card h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f1f1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #27ae60, #219653);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .search-box {
            flex: 1;
            min-width: 300px;
            padding: 12px 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        .search-box:focus {
            outline: none;
            border-color: #3498db;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 15px;
            text-align: left;
            color: #2c3e50;
            font-weight: 600;
            border-bottom: 2px solid #dee2e6;
        }
        
        td {
            padding: 15px;
            border-bottom: 1px solid #eee;
            vertical-align: middle;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .status-badge {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-confirmed {
            background: #d4edda;
            color: #155724;
        }
        
        .status-cancelled {
            background: #f8d7da;
            color: #721c24;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .action-btn:hover {
            transform: scale(1.05);
        }
        
        .action-confirm {
            background: #27ae60;
            color: white;
        }
        
        .action-call {
            background: #3498db;
            color: white;
        }
        
        .action-delete {
            background: #e74c3c;
            color: white;
        }
        
        .no-bookings {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
            font-size: 1.2rem;
        }
        
        .no-bookings i {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #bdc3c7;
        }
        
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
            }
            
            .search-box {
                min-width: auto;
            }
            
            table {
                display: block;
                overflow-x: auto;
            }
        }
        
        .admin-footer {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            color: #7f8c8d;
            border-top: 1px solid #eee;
        }
        
        .contact-info {
            background: #e8f4fd;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 20px;
            border-radius: 0 10px 10px 0;
        }
        
        .contact-info h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Header -->
        <div class="admin-header">
            <h1><i class="fas fa-crown"></i> Shamma Salon Admin Dashboard</h1>
            <p>Manage bookings, track appointments, and monitor salon performance</p>
        </div>
        
        <!-- Stats Cards -->
        <div class="stats-cards">
            <div class="stat-card">
                <div class="stat-icon" style="color: #3498db;">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <h3 id="totalBookings">0</h3>
                <p>Total Bookings</p>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon" style="color: #27ae60;">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3 id="confirmedBookings">0</h3>
                <p>Confirmed</p>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon" style="color: #f39c12;">
                    <i class="fas fa-clock"></i>
                </div>
                <h3 id="pendingBookings">0</h3>
                <p>Pending</p>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon" style="color: #9b59b6;">
                    <i class="fas fa-money-bill-wave"></i>
                </div>
                <h3 id="revenue">OMR 0</h3>
                <p>Today's Revenue</p>
            </div>
        </div>
        
        <!-- Contact Info -->
        <div class="contact-info">
            <h3><i class="fas fa-info-circle"></i> Admin Contact Information</h3>
            <p><strong>Email:</strong> 202111205@gcet.edu.om</p>
            <p><strong>Phone:</strong> +968 9113 9659</p>
            <p><strong>Last Updated:</strong> <span id="lastUpdated">Never</span></p>
        </div>
        
        <!-- Bookings Management -->
        <div class="booking-card">
            <h2><i class="fas fa-list-alt"></i> Bookings Management</h2>
            
            <div class="controls">
                <button class="btn btn-primary" onclick="loadBookings()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="btn btn-success" onclick="exportToCSV()">
                    <i class="fas fa-file-export"></i> Export CSV
                </button>
                <button class="btn btn-warning" onclick="exportToExcel()">
                    <i class="fas fa-file-excel"></i> Export Excel
                </button>
                <button class="btn btn-danger" onclick="clearAllBookings()">
                    <i class="fas fa-trash"></i> Clear All
                </button>
                
                <input type="text" 
                       class="search-box" 
                       id="searchInput" 
                       placeholder="Search by name, phone, service..."
                       onkeyup="searchBookings()">
                
                <select class="search-box" id="filterStatus" onchange="filterByStatus()">
                    <option value="">All Status</option>
                    <option value="pending">Pending</option>
                    <option value="confirmed">Confirmed</option>
                    <option value="cancelled">Cancelled</option>
                </select>
            </div>
            
            <div id="bookingsTable">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Customer</th>
                            <th>Phone</th>
                            <th>Service</th>
                            <th>Price</th>
                            <th>Date & Time</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="bookingsBody">
                        <!-- Bookings will be loaded here -->
                    </tbody>
                </table>
                
                <div id="noBookingsMessage" class="no-bookings" style="display: none;">
                    <i class="fas fa-calendar-times"></i>
                    <h3>No Bookings Yet</h3>
                    <p>When customers book appointments, they will appear here.</p>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="admin-footer">
            <p>&copy; 2024 Shamma Salon Admin Panel | v1.0</p>
            <p><i class="fas fa-shield-alt"></i> Secure Access Only</p>
        </div>
    </div>
    
    <script>
        // Sample pricing for services
        const servicePrices = {
            'Hair Cutting': 'OMR 10.000',
            'Hair Styling': 'OMR 8.000',
            'Hair Coloring': 'OMR 12.000',
            'Hair Treatment': 'OMR 11.000',
            'Hair Blowout': 'OMR 7.000',
            'Manicure': 'OMR 6.000',
            'Pedicure': 'OMR 7.000',
            'Nail Polish': 'OMR 3.000',
            'Basic Makeup': 'OMR 8.000',
            'Event Makeup': 'OMR 14.000',
            'Facial Cleansing': 'OMR 9.000',
            'Face Masks': 'OMR 7.000',
            'Waxing': 'OMR 5.000',
            'Sugar Wax': 'OMR 6.000'
        };
        
        // Load bookings from localStorage
        function loadBookings() {
            const bookings = JSON.parse(localStorage.getItem('shammaBookings') || '[]');
            const tbody = document.getElementById('bookingsBody');
            const noBookingsMsg = document.getElementById('noBookingsMessage');
            
            // Update stats
            updateStats(bookings);
            
            if (bookings.length === 0) {
                tbody.innerHTML = '';
                noBookingsMsg.style.display = 'block';
                return;
            }
            
            noBookingsMsg.style.display = 'none';
            
            // Sort by date (newest first)
            bookings.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            let html = '';
            
            bookings.forEach((booking, index) => {
                const price = servicePrices[booking.service] || 'OMR 0.00';
                const date = new Date(booking.date).toLocaleDateString('en-US', {
                    weekday: 'short',
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
                
                html += `
                    <tr>
                        <td><strong>#${booking.id || index + 1}</strong></td>
                        <td>
                            <strong>${booking.name}</strong>
                            ${booking.notes ? `<br><small style="color:#666;">${booking.notes}</small>` : ''}
                        </td>
                        <td>
                            <a href="tel:${booking.phone}" style="color:#3498db; text-decoration:none;">
                                <i class="fas fa-phone"></i> ${booking.phone}
                            </a>
                        </td>
                        <td>${booking.service}</td>
                        <td><strong style="color:#27ae60;">${price}</strong></td>
                        <td>
                            <i class="far fa-calendar"></i> ${date}<br>
                            <i class="far fa-clock"></i> ${booking.time}
                        </td>
                        <td>
                            <span class="status-badge status-${booking.status || 'pending'}">
                                ${(booking.status || 'pending').toUpperCase()}
                            </span>
                        </td>
                        <td>
                            <div class="action-buttons">
                                <button class="action-btn action-confirm" onclick="confirmBooking(${booking.id || index})" ${booking.status === 'confirmed' ? 'disabled style="opacity:0.5"' : ''}>
                                    <i class="fas fa-check"></i> Confirm
                                </button>
                                <button class="action-btn action-call" onclick="callCustomer('${booking.phone}')">
                                    <i class="fas fa-phone"></i> Call
                                </button>
                                <button class="action-btn action-delete" onclick="deleteBooking(${booking.id || index})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;
            document.getElementById('lastUpdated').textContent = new Date().toLocaleString();
        }
        
        // Update statistics
        function updateStats(bookings) {
            const total = bookings.length;
            const confirmed = bookings.filter(b => b.status === 'confirmed').length;
            const pending = bookings.filter(b => b.status === 'pending').length;
            
            // Calculate revenue (simplified)
            let revenue = 0;
            bookings.forEach(b => {
                if (b.status === 'confirmed') {
                    const price = servicePrices[b.service] || 'OMR 0.00';
                    const amount = parseFloat(price.replace('OMR ', '').replace(',', ''));
                    if (!isNaN(amount)) revenue += amount;
                }
            });
            
            document.getElementById('totalBookings').textContent = total;
            document.getElementById('confirmedBookings').textContent = confirmed;
            document.getElementById('pendingBookings').textContent = pending;
            document.getElementById('revenue').textContent = `OMR ${revenue.toFixed(2)}`;
        }
        
        // Confirm a booking
        function confirmBooking(id) {
            let bookings = JSON.parse(localStorage.getItem('shammaBookings') || '[]');
            const booking = bookings.find(b => b.id === id || bookings.indexOf(b) === id);
            
            if (booking && confirm(`Confirm booking for ${booking.name}?`)) {
                booking.status = 'confirmed';
                localStorage.setItem('shammaBookings', JSON.stringify(bookings));
                loadBookings();
                showNotification(`âœ… Booking #${id} confirmed!`, 'success');
            }
        }
        
        // Call customer
        function callCustomer(phone) {
            window.open(`tel:${phone}`, '_blank');
        }
        
        // Delete a booking
        function deleteBooking(id) {
            if (confirm('Are you sure you want to delete this booking?')) {
                let bookings = JSON.parse(localStorage.getItem('shammaBookings') || '[]');
                bookings = bookings.filter((b, index) => b.id !== id && index !== id);
                localStorage.setItem('shammaBookings', JSON.stringify(bookings));
                loadBookings();
                showNotification(`ðŸ—‘ï¸ Booking deleted!`, 'warning');
            }
        }
        
        // Export to CSV
        function exportToCSV() {
            const bookings = JSON.parse(localStorage.getItem('shammaBookings') || '[]');
            
            if (bookings.length === 0) {
                alert('No bookings to export!');
                return;
            }
            
            let csv = 'ID,Customer Name,Phone,Service,Price,Date,Time,Status,Notes\n';
            
            bookings.forEach((booking, index) => {
                const price = servicePrices[booking.service] || 'OMR 0.00';
                csv += `${index + 1},"${booking.name}","${booking.phone}","${booking.service}","${price}","${booking.date}","${booking.time}","${booking.status || 'pending'}","${booking.notes || ''}"\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `shamma-bookings-${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification(`ðŸ“Š CSV exported with ${bookings.length} bookings`, 'success');
        }
        
        // Export to Excel (simplified)
        function exportToExcel() {
            exportToCSV(); // For now, same as CSV
            showNotification('Excel export coming soon!', 'info');
        }
        
        // Clear all bookings
        function clearAllBookings() {
            if (confirm('âš ï¸ WARNING: This will delete ALL bookings. Are you sure?')) {
                if (confirm('âš ï¸ LAST CHANCE: This cannot be undone!')) {
                    localStorage.removeItem('shammaBookings');
                    loadBookings();
                    showNotification('All bookings cleared!', 'danger');
                }
            }
        }
        
        // Search bookings
        function searchBookings() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const rows = document.querySelectorAll('#bookingsBody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }
        
        // Filter by status
        function filterByStatus() {
            const status = document.getElementById('filterStatus').value;
            const rows = document.querySelectorAll('#bookingsBody tr');
            
            rows.forEach(row => {
                const rowStatus = row.querySelector('.status-badge')?.textContent.toLowerCase() || '';
                if (!status || rowStatus.includes(status)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        // Show notification
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                background: ${type === 'success' ? '#27ae60' : type === 'warning' ? '#f39c12' : type === 'danger' ? '#e74c3c' : '#3498db'};
                color: white;
                border-radius: 10px;
                box-shadow: 0 5px 20px rgba(0,0,0,0.2);
                z-index: 9999;
                animation: slideIn 0.3s ease;
            `;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : type === 'danger' ? 'times-circle' : 'info-circle'}"></i>
                ${message}
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
        // Load bookings when page loads
        document.addEventListener('DOMContentLoaded', loadBookings);
        
        // Auto-refresh every 30 seconds
        setInterval(loadBookings, 30000);
    </script>
</body>
</html>
